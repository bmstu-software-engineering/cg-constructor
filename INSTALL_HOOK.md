# Установка pre-commit hook

Этот документ описывает, как установить pre-commit hook для автоматического запуска тестов перед коммитом.

## Что делает pre-commit hook?

Pre-commit hook автоматически запускает тесты только в тех пакетах, которые были изменены в текущем коммите. Это позволяет:

1. Ускорить процесс проверки перед коммитом, запуская тесты только для измененных пакетов
2. Предотвратить коммит, если тесты не проходят
3. Получить подробную информацию о результатах тестов

## Установка

Для установки pre-commit hook выполните следующие шаги:

1. Убедитесь, что скрипты `run_tests.sh` и `pre-commit-hook.sh` находятся в корне репозитория и имеют права на выполнение:

```bash
chmod +x run_tests.sh pre-commit-hook.sh
```

2. Создайте символическую ссылку на скрипт `pre-commit-hook.sh` в директории `.git/hooks/`:

```bash
ln -sf ../../pre-commit-hook.sh .git/hooks/pre-commit
```

или скопируйте скрипт в директорию `.git/hooks/`:

```bash
cp pre-commit-hook.sh .git/hooks/pre-commit
```

## Проверка установки

Чтобы проверить, что hook установлен правильно, выполните следующую команду:

```bash
ls -la .git/hooks/pre-commit
```

Вы должны увидеть, что файл существует и имеет права на выполнение.

## Использование

После установки hook будет автоматически запускаться при каждой попытке создать коммит с помощью команды `git commit`. Если тесты не проходят, коммит будет отменен, и вы увидите сообщение об ошибке.

Если вы хотите пропустить выполнение hook (не рекомендуется), вы можете использовать флаг `--no-verify`:

```bash
git commit --no-verify
```

## Удаление

Если вы хотите удалить hook, просто удалите файл `.git/hooks/pre-commit`:

```bash
rm .git/hooks/pre-commit
```
