# Golden тесты для проверки отображения координат

Для тестирования функциональности отображения координат точек и линий необходимо создать следующие golden тесты:

## 1. Базовые тесты отображения координат

### 1.1. Тест отображения координат для одиночных точек
- **Описание**: Проверяет корректное отображение координат для набора точек
- **Входные данные**: Набор точек с разными координатами
- **Ожидаемый результат**: Рядом с каждой точкой должны отображаться её координаты в формате (x, y)
- **Имя файла**: `viewer_with_point_coordinates.png`

### 1.2. Тест отображения координат для линий
- **Описание**: Проверяет корректное отображение координат начала и конца линий
- **Входные данные**: Набор линий с разными начальными и конечными точками
- **Ожидаемый результат**: Рядом с каждой точкой начала и конца линии должны отображаться её координаты
- **Имя файла**: `viewer_with_line_coordinates.png`

### 1.3. Тест отображения координат для точек и линий
- **Описание**: Проверяет корректное отображение координат для комбинации точек и линий
- **Входные данные**: Набор точек и линий
- **Ожидаемый результат**: Координаты должны отображаться для всех точек и концов линий без дублирования
- **Имя файла**: `viewer_with_points_and_lines_coordinates.png`

## 2. Тесты масштабирования

### 2.1. Тест отображения координат при нормальном масштабе
- **Описание**: Проверяет отображение координат при стандартном масштабе (1.0)
- **Входные данные**: Набор точек и линий при масштабе 1.0
- **Ожидаемый результат**: Координаты отображаются с нормальным размером шрифта
- **Имя файла**: `coordinates_normal_scale.png`

### 2.2. Тест отображения координат при увеличенном масштабе
- **Описание**: Проверяет отображение координат при увеличенном масштабе (> 1.0)
- **Входные данные**: Набор точек и линий при масштабе 2.0
- **Ожидаемый результат**: Координаты отображаются с увеличенным размером шрифта
- **Имя файла**: `coordinates_increased_scale.png`

### 2.3. Тест отображения координат при уменьшенном масштабе
- **Описание**: Проверяет отображение координат при уменьшенном масштабе (< 0.5)
- **Входные данные**: Набор точек и линий при масштабе 0.3
- **Ожидаемый результат**: Координаты отображаются с минимальным размером шрифта и линиями-указателями
- **Имя файла**: `coordinates_decreased_scale.png`

## 3. Тесты переключения режима отображения

### 3.1. Тест переключения режима отображения координат
- **Описание**: Проверяет корректное включение/выключение отображения координат
- **Входные данные**: Набор точек и линий
- **Шаги**:
  1. Отрисовать точки и линии без координат
  2. Включить отображение координат
  3. Выключить отображение координат
- **Ожидаемый результат**: Координаты должны появляться и исчезать при переключении режима
- **Имена файлов**:
  - `coordinates_display_off.png`
  - `coordinates_display_on.png`

### 3.2. Тест сохранения состояния отображения координат
- **Описание**: Проверяет, что состояние отображения координат сохраняется при изменении данных
- **Входные данные**: Набор точек и линий
- **Шаги**:
  1. Включить отображение координат
  2. Очистить холст
  3. Добавить новые точки и линии
- **Ожидаемый результат**: После добавления новых данных координаты должны отображаться
- **Имя файла**: `coordinates_state_preserved.png`

## 4. Тесты для нескольких Viewer

### 4.1. Тест независимого отображения координат в разных Viewer
- **Описание**: Проверяет, что настройки отображения координат независимы для разных экземпляров Viewer
- **Входные данные**: Два Viewer с разными наборами точек и линий
- **Шаги**:
  1. Включить отображение координат для первого Viewer
  2. Оставить отображение координат выключенным для второго Viewer
- **Ожидаемый результат**: Координаты должны отображаться только в первом Viewer
- **Имя файла**: `two_viewers_different_coordinate_settings.png`

## 5. Тесты граничных случаев

### 5.1. Тест отображения координат для большого количества точек
- **Описание**: Проверяет корректное отображение координат при большом количестве точек
- **Входные данные**: 50+ точек на холсте
- **Ожидаемый результат**: Координаты должны корректно отображаться для всех точек без перекрытия
- **Имя файла**: `coordinates_many_points.png`

### 5.2. Тест отображения координат для точек с одинаковыми координатами
- **Описание**: Проверяет корректное отображение координат для точек, расположенных в одном месте
- **Входные данные**: Несколько точек с одинаковыми координатами
- **Ожидаемый результат**: Координаты должны отображаться без дублирования
- **Имя файла**: `coordinates_overlapping_points.png`

### 5.3. Тест отображения координат для точек на границе холста
- **Описание**: Проверяет корректное отображение координат для точек, расположенных на границе видимой области
- **Входные данные**: Точки на границах холста
- **Ожидаемый результат**: Координаты должны быть видны полностью
- **Имя файла**: `coordinates_edge_points.png`

## Реализация тестов

Для реализации этих тестов необходимо:

1. Создать тестовые данные (точки и линии) для каждого сценария
2. Настроить Viewer с соответствующими параметрами
3. Включить/выключить отображение координат в зависимости от теста
4. Отрендерить виджет и сравнить с эталонным изображением

Пример кода для теста:

```dart
testWidgets('Viewer with coordinates displayed', (WidgetTester tester) async {
  // Создаем тестовые данные
  final points = [
    const Point(x: 50, y: 50, color: '#FF0000', thickness: 5),
    const Point(x: 150, y: 50, color: '#00FF00', thickness: 5),
    const Point(x: 150, y: 150, color: '#0000FF', thickness: 5),
    const Point(x: 50, y: 150, color: '#FFFF00', thickness: 5),
  ];

  final lines = [
    Line(a: points[0], b: points[1], color: '#FF0000', thickness: 2),
    Line(a: points[1], b: points[2], color: '#00FF00', thickness: 2),
    Line(a: points[2], b: points[3], color: '#0000FF', thickness: 2),
    Line(a: points[3], b: points[0], color: '#FFFF00', thickness: 2),
  ];

  // Создаем виджет для тестирования
  final viewer = ViewerTestUtils.createTestViewer(
    points: points,
    lines: lines,
  );

  // Включаем отображение координат
  viewer.setShowCoordinates(true);

  // Рендерим виджет
  await tester.pumpWidget(
    MaterialApp(
      home: Scaffold(
        body: Center(
          child: Container(
            width: 300,
            height: 300,
            child: viewer.buildWidget(),
          ),
        ),
      ),
    ),
  );

  // Сравниваем с эталонным изображением
  await expectLater(
    find.byType(MaterialApp),
    matchesGoldenFile('goldens/viewer_with_coordinates.png'),
  );
});
```

Эти тесты помогут убедиться, что функциональность отображения координат работает корректно во всех сценариях использования.
