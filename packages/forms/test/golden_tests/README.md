# Golden тесты для виджетов форм

Golden тесты используются для проверки визуального вида виджетов путем сравнения с эталонными изображениями. Это позволяет обнаруживать непреднамеренные изменения в визуальном представлении виджетов.

## Запуск golden тестов

### Использование скрипта

В директории `test/golden_tests/` есть скрипт `run_golden_tests.sh`, который упрощает запуск тестов:

```bash
# Запуск всех golden тестов
./test/golden_tests/run_golden_tests.sh

# Обновление всех эталонных изображений
./test/golden_tests/run_golden_tests.sh --update-goldens

# Запуск конкретного теста
./test/golden_tests/run_golden_tests.sh --test=angle_field_widget_golden_test.dart

# Обновление эталонных изображений для конкретного теста
./test/golden_tests/run_golden_tests.sh --update-goldens --test=angle_field_widget_golden_test.dart
```

### Ручной запуск

Вы также можете запускать тесты вручную с помощью стандартных команд Flutter:

```bash
# Запуск всех golden тестов
flutter test test/golden_tests/

# Запуск конкретного теста
flutter test test/golden_tests/angle_field_widget_golden_test.dart

# Обновление всех эталонных изображений
flutter test --update-goldens test/golden_tests/

# Обновление эталонных изображений для конкретного теста
flutter test --update-goldens test/golden_tests/angle_field_widget_golden_test.dart
```

## Структура golden тестов

Каждый golden тест проверяет различные состояния виджета:

1. **Стандартное состояние** - виджет с обычными настройками
2. **Состояние с ошибкой** - виджет с ошибкой валидации
3. **Пустое состояние** - виджет без значения
4. **Кастомная декорация** - виджет с пользовательской декорацией
5. **Другие специфические состояния** - в зависимости от типа виджета

## Список golden тестов

- `angle_field_widget_golden_test.dart` - тесты для виджета угла
- `enum_select_field_widget_golden_test.dart` - тесты для виджета выбора из списка
- `list_field_widget_golden_test.dart` - тесты для виджета списка
- `number_field_widget_golden_test.dart` - тесты для виджета числового поля
- `string_field_widget_golden_test.dart` - тесты для виджета строкового поля
- `vector_field_widget_golden_test.dart` - тесты для виджета вектора

## Особенности запуска на разных платформах

Golden тесты могут давать разные результаты на разных платформах из-за различий в рендеринге. Рекомендуется запускать и обновлять golden тесты на одной и той же платформе.

Если вы получаете ошибки при запуске golden тестов, убедитесь, что:

1. Вы используете ту же версию Flutter, что и при создании эталонных изображений
2. Вы запускаете тесты на той же платформе (Linux, macOS, Windows), что и при создании эталонных изображений
3. Разрешение экрана и масштабирование соответствуют тем, что были при создании эталонных изображений

## Добавление новых golden тестов

При добавлении новых golden тестов следуйте этим рекомендациям:

1. Создайте новый файл в директории `test/golden_tests/`
2. Используйте существующие тесты как шаблон
3. Проверьте различные состояния виджета
4. Запустите тест с флагом `--update-goldens` для создания эталонных изображений
5. Проверьте созданные изображения, чтобы убедиться, что они соответствуют ожиданиям
6. Добавьте новый тест в список в этом README.md
